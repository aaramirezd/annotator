<!DOCTYPE html>
<html lang=en>
    <head>
        <meta charset="utf-8">
        <!--Import Google Icon Font-->
        <link href="css/material-icons.css" rel="stylesheet">
        <!--Import materialize.css-->
        <link rel="stylesheet" href="css/materialize.min.css">

        <!-- font awesome -->
        <link rel="stylesheet" href="css/font-awesome.min.css" />

        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <meta name="description" content="Freeplay sandbox experiment -- Annotations UI">
        <meta name="author" content="Séverin Lemaignan">
        <link rel="icon" href="../../favicon.ico">

        <title>Freeplay Sandbox -- Annotations</title>
    </head>

    <body>
        <!--Import jQuery before materialize.js-->
        <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
        <script src="js/materialize.min.js"></script>


        <div class="navbar-fixed">
        <nav>
        <div class="nav-wrapper">
        <ul class="right">
<!--        <li id="nav-records" class="active"><a onclick="switchTo('records')"><i class="material-icons left">assignment_ind</i> Records</a></li>
        <li id="nav-status"><a onclick="switchTo('status')"><i class="material-icons left">search</i> Status</a></li>
        <li><a onclick="save()"><i class="fa fa-hdd-o fa-3x"></i></a></li>
-->
        <li><a onclick="document.documentElement.webkitRequestFullscreen();document.documentElement.mozRequestFullScreen();"><i class="fa fa-arrows-alt fa-3x"></i></a></li>
        </ul>
        </div>
        </nav>
        </div>
        <p>
        <div class="container">
            <div class="row center">
                <a class="waves-effect teal btn-large" onclick="jumpto(0)"><i class="fa fa-step-backward"></i></a>
                <a class="waves-effect light-green btn-large" onclick="jumpby(-10)"><i class="fa fa-backward"></i> 10</a>
                <a class="waves-effect lime btn-large" onclick="jumpby(-1)"><i class="fa fa-backward"></i> 1</a>
                <a class="waves-effect orange btn-large" onclick="togglepause()"><i id="pausebtn" class="fa fa-pause"></i></a>
                <a class="waves-effect lime btn-large" onclick="jumpby(1)"><i class="fa fa-forward"></i> 1</a>
                <a class="waves-effect light-green btn-large" onclick="jumpby(10)"><i class="fa fa-forward"></i> 10</a>
                <a class="waves-effect teal btn-large" onclick="jumpto(-1)"><i class="fa fa-step-forward"></i></a>
            </div>
        </div>
        </p>

        <p>
        <div class="container">
            <div class="row">
                <div id="yellow-participant" class="center col s4" style="border: 1px solid #c0c0c0;">
                        <h2 class="amber-text"><i class="large material-icons">person_pin</i></h2>
                        <p><a class="waves-effect waves-light btn" onclick="annotate('yellow', 'hostile')">Anti-social</a>
                        <p><a class="waves-effect waves-light btn" onclick="annotate('yellow', 'prosocial')">Pro-social</a>
                        <p><a class="waves-effect waves-light btn" onclick="annotate('yellow', 'assertive')">Assertive</a>
                        <p><a class="waves-effect waves-light btn" onclick="annotate('yellow', 'passive')">Passive</a>
                </div>
                <div id="both-participants" class="center col s4" style="border: 1px solid #c0c0c0;">
                    <h2><span class="amber-text"><i class="large material-icons">person_pin</i></span><span class="deep-purple-text"><i class="large material-icons">person_pin</i></span></h2>
                    <p><a class="waves-effect waves-light btn" onclick="annotate('both', 'hostile')">Anti-social</a>
                    <p><a class="waves-effect waves-light btn" onclick="annotate('both', 'prosocial')">Pro-social</a>
                    <p><a class="waves-effect waves-light btn" onclick="annotate('both', 'assertive')">Assertive</a>
                    <p><a class="waves-effect waves-light btn" onclick="annotate('both', 'passive')">Passive</a>
                </div>
                <div id="purple-participant" class="center col s4" style="border: 1px solid #c0c0c0;">
                        <h2 class="deep-purple-text"><i class="large material-icons">person_pin</i></h2>
                        <p><a class="waves-effect waves-light btn" onclick="annotate('purple', 'hostile')">Anti-social</a>
                        <p><a class="waves-effect waves-light btn" onclick="annotate('purple', 'prosocial')">Pro-social</a>
                        <p><a class="waves-effect waves-light btn" onclick="annotate('purple', 'assertive')">Assertive</a>
                        <p><a class="waves-effect waves-light btn" onclick="annotate('purple', 'passive')">Passive</a>
                </div>
            </div>
        </div>
        </p>

<script>

function performAjax(url) {

    $.ajax({
        url: url,
        dataType: "json",
        context: this,
        success: function(msg) {
            console.log(msg);
        }

    });
}

var ispaused = false;

function getpaused() {

    var url = "http://" + window.location.hostname +':8080?ispaused';

    $.ajax({
        url: url,
        dataType: "json",
        context: this,
        success: function(msg) {
            console.log(msg);
            ispaused = msg;

            if(ispaused) {
                $("#pausebtn").removeClass("fa-pause");
                $("#pausebtn").addClass("fa-play");
            }
            else {
                $("#pausebtn").removeClass("fa-play");
                $("#pausebtn").addClass("fa-pause");
            }
        }

    });
}

getpaused();

function togglepause() {

    if(ispaused) {
        var url = "http://" + window.location.hostname +':8080?resume';
        $("#pausebtn").removeClass("fa-pause");
        $("#pausebtn").addClass("fa-play");
    }
    else {
        var url = "http://" + window.location.hostname +':8080?pause';
        $("#pausebtn").removeClass("fa-play");
        $("#pausebtn").addClass("fa-pause");
    }
    $.ajax({
        url: url,
        dataType: "json",
        context: this,
        success: function(msg) {
            console.log("->now, getpaused");
            getpaused();
        }

    });
}


function jumpto(time) {

    var url = "http://" + window.location.hostname +':8080?jumpto=' + time;
    performAjax(url);
}


function jumpby(time) {

    var url = "http://" + window.location.hostname +':8080?jumpby=' + time;
    performAjax(url);
}

function annotate(stream, annotation) {

    var url = "http://" + window.location.hostname +':8080?annotation={"stream":"' + stream + '", "type":"' + annotation + '"}';
    performAjax(url);
}

</script>
    </body>
</html>

