<!DOCTYPE html>
<html lang=en>
    <head>
        <meta charset="utf-8">
        <!--Import Google Icon Font-->
        <link href="css/material-icons.css" rel="stylesheet">
        <!--Import materialize.css-->
        <link rel="stylesheet" href="css/materialize.min.css">

        <!-- font awesome -->
        <link rel="stylesheet" href="css/font-awesome.min.css" />

        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <meta name="description" content="Freeplay sandbox experiment -- Annotations UI">
        <meta name="author" content="Séverin Lemaignan">
        <link rel="icon" href="../../favicon.ico">

        <title>Freeplay Sandbox -- Annotations</title>
    </head>

    <body>
        <style>
body {
    display: flex;
    min-height: 100vh;
    flex-direction: column;
}

main {
    flex: 1 0 auto;
}

.btn-size {
    width: 14em;
    min-height: 4em;
}

        </style>
        <!--Import jQuery before materialize.js-->
        <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
        <script src="js/materialize.min.js"></script>


        <header>
        </header>
        <main>

        <p>
            <!-- TASK ENGAGEMENT -->
            <div class="row">
                <div class="center col s5" style="background-color: #fce97e;">
                        <p> <a id="goaloriented-yellow" class="waves-effect green btn btn-size" onclick="annotate('yellow', 'goaloriented')">Goal orien.</a>
                            <a id="aimless-yellow" class="waves-effect amber darken-4 btn btn-size" onclick="annotate('yellow', 'aimless')">Aimless</a>
                        <p> <a id="adultseeking-yellow" class="waves-effect red lighten-2 btn btn-size" onclick="annotate('yellow', 'adultseeking')">Adult seek</a>
                            <a id="noplay-yellow" class="waves-effect blue lighten-5 black-text btn btn-size" onclick="annotate('yellow', 'noplay')">No play</a>
                </div>
                <div class="col s2"></div>
                <div class="center col s5" style="background-color:#ad7fa8;">
                        <p> <a id="aimless-purple" class="waves-effect amber darken-4 btn btn-size" onclick="annotate('purple', 'aimless')">Aimless</a>
                            <a id="goaloriented-purple" class="waves-effect green btn btn-size" onclick="annotate('purple', 'goaloriented')">Goal orien.</a>
                        <p> <a id="noplay-purple" class="waves-effect blue lighten-5 black-text btn btn-size" onclick="annotate('purple', 'noplay')">No play</a>
                            <a id="adultseeking-purple" class="waves-effect red lighten-2 btn btn-size" onclick="annotate('purple', 'adultseeking')">Adult seek</a>
                </div>
            </div>

            <!-- SOCIAL ENGAGEMENT -->
            <div class="row">
                <div class="center col s5" style="background-color: #fce97e;">
                    <p> <a id="solitary-yellow" class="waves-effect indigo lighten-3 btn btn-size" onclick="annotate('yellow', 'solitary')">Solitary</a>
                        <a id="onlooker-yellow" class="waves-effect cyan btn btn-size" onclick="annotate('yellow', 'onlooker')">Onlooker</a>
                </div>
                <div class="col s2"></div>
                <div class="center col s5" style="background-color:#ad7fa8;">
                    <p> <a id="onlooker-purple" class="waves-effect cyan btn btn-size" onclick="annotate('purple', 'onlooker')">Onlooker</a>
                        <a id="solitary-purple" class="waves-effect indigo lighten-3 btn btn-size" onclick="annotate('purple', 'solitary')">Solitary</a>
                </div>
            </div>

            <div class="row">
                <div class="center col s12" style="background-color: white;">
                    <p> <a id="parallel-both" class="waves-effect lime black-text lighten-3 btn btn-size" onclick="annotate('both', 'parallel')">Parallel</a>
                        <a id="associative-both" class="waves-effect yellow black-text btn btn-size" onclick="annotate('both', 'associative')">Associative</a>
                        <a id="cooperative-both" class="waves-effect amber black-text btn btn-size" onclick="annotate('both', 'cooperative')">Cooperative</a>
                </div>
            </div>

            <!-- SOCIAL ATTITUDE -->
            <div class="row">
                <div class="center col s5" style="background-color: #fce97e;">
                        <p> <a id="prosocial-yellow" class="waves-effect green btn btn-size" onclick="annotate('yellow', 'prosocial')">Pro-social</a>
                            <a id="adversarial-yellow" class="waves-effect amber darken-4 btn btn-size" onclick="annotate('yellow', 'adversarial')">Adversarial</a>
                        <p> <a id="assertive-yellow" class="waves-effect waves-light btn btn-size" onclick="annotate('yellow', 'assertive')">Assertive</a>
                            <a id="frustrated-yellow" class="waves-effect purple btn btn-size" onclick="annotate('yellow', 'frustrated')">Frustrated</a>
                        <p> <a id="passive-yellow" class="waves-effect blue lighten-5 black-text btn btn-size" onclick="annotate('yellow', 'passive')">Passive</a>
                </div>
                <div class="col s2"></div>
                <div class="center col s5" style="background-color:#ad7fa8;">
                        <p> <a id="adversarial-purple" class="waves-effect amber darken-4 btn btn-size" onclick="annotate('purple', 'adversarial')">Adversarial</a>
                            <a id="prosocial-purple" class="waves-effect green btn btn-size" onclick="annotate('purple', 'prosocial')">Pro-social</a>
                        <p> <a id="frustrated-purple" class="waves-effect purple btn btn-size" onclick="annotate('purple', 'frustrated')">Frustrated</a>
                            <a id="assertive-purple" class="waves-effect waves-light btn btn-size" onclick="annotate('purple', 'assertive')">Assertive</a>
                        <p> <a id="passive-purple" class="waves-effect blue lighten-5 black-text btn btn-size" onclick="annotate('purple', 'passive')">Passive</a>
                </div>
            </div>
        </p>

        </main>
        <footer>
            <div class="row">
                <div class="col s10">
                <a class="waves-effect teal btn-large" onclick="jumpto(0)"><i class="fa fa-step-backward"></i></a>
                <a class="waves-effect light-green btn-large" onclick="jumpby(-10)"><i class="fa fa-backward"></i> 10</a>
                <a class="waves-effect lime btn-large" onclick="jumpby(-1)"><i class="fa fa-backward"></i> 1</a>
                <a class="waves-effect orange btn-large" style="width:30%" onclick="togglepause()"><i id="pausebtn" class="fa fa-pause"></i></a>
                <a class="waves-effect lime btn-large" onclick="jumpby(1)"><i class="fa fa-forward"></i> 1</a>
                <a class="waves-effect light-green btn-large" onclick="jumpby(10)"><i class="fa fa-forward"></i> 10</a>
                <a class="waves-effect teal btn-large" onclick="jumpto(-1)"><i class="fa fa-step-forward"></i></a>
                </div>
                <div class="col s1">
                </div>
                <div class="col s1">

                <a onclick="document.documentElement.webkitRequestFullscreen();document.documentElement.mozRequestFullScreen();"><i class="fa fa-arrows-alt fa-3x"></i></a>
                </div>
            </div>

        </footer>

<script>

var activeAnnotationsInterval;

function startActiveAnnotationsUpdate() {
    activeAnnotationsInterval = setInterval(updateActiveAnnotations, 1000);
}

function stopActiveAnnotationsUpdate() {
    clearInterval(activeAnnotationsInterval);
}

function updateActiveAnnotations() {
    var url = "http://" + window.location.hostname +':8080?activeannotations';

    $.ajax({
        url: url,
        dataType: "json",
        context: this,
        success: function(annotations) {
                for (var a in annotations) {
                    console.log(a);
                }
        }
        });
}

//startActiveAnnotationsUpdate();

function performAjax(url) {

    $.ajax({
        url: url,
        dataType: "json",
        context: this,
        success: function(msg) {
            console.log(msg);
        }

    });
}

var ispaused = false;

function getpaused() {

    var url = "http://" + window.location.hostname +':8080?ispaused';

    $.ajax({
        url: url,
        dataType: "json",
        context: this,
        success: function(msg) {
            console.log(msg);
            ispaused = msg;

            if(ispaused) {
                $("#pausebtn").removeClass("fa-pause");
                $("#pausebtn").addClass("fa-play");
            }
            else {
                $("#pausebtn").removeClass("fa-play");
                $("#pausebtn").addClass("fa-pause");
            }
        }

    });
}

getpaused();

function togglepause() {

    if(ispaused) {
        var url = "http://" + window.location.hostname +':8080?resume';
        $("#pausebtn").removeClass("fa-pause");
        $("#pausebtn").addClass("fa-play");
    }
    else {
        var url = "http://" + window.location.hostname +':8080?pause';
        $("#pausebtn").removeClass("fa-play");
        $("#pausebtn").addClass("fa-pause");
    }
    $.ajax({
        url: url,
        dataType: "json",
        context: this,
        success: function(msg) {
            console.log("->now, getpaused");
            getpaused();
        }

    });
}


function jumpto(time) {

    var url = "http://" + window.location.hostname +':8080?jumpto=' + time;
    performAjax(url);
}


function jumpby(time) {

    var url = "http://" + window.location.hostname +':8080?jumpby=' + time;
    performAjax(url);
}

function annotate(stream, annotation) {

    //$("#" + annotation + "-" + stream).addClass("pulse");
    var url = "http://" + window.location.hostname +':8080?annotation={"stream":"' + stream + '", "type":"' + annotation + '"}';
    performAjax(url);
}

</script>
    </body>
</html>

